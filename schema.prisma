generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DB_URL")
}

model account_statuses {
  account_status_id Int     @default(autoincrement()) @id
  name              String
  users             users[]
}

model account_types {
  account_type_id Int     @default(autoincrement()) @id
  name            String
  users           users[]
}

model activity_log_items {
  activity_log_item_id   Int                    @default(autoincrement()) @id
  link                   String?
  logged_at              DateTime?              @default(now())
  logger_id              Int
  message                String
  message_code_id        Int
  user_id                Int
  activity_message_codes activity_message_codes @relation(fields: [message_code_id], references: [activity_message_code_id])
  users                  users                  @relation(fields: [user_id], references: [user_id])

  @@index([logger_id], name: "logger_id")
  @@index([message_code_id], name: "message_code_id")
  @@index([user_id], name: "user_id")
}

model activity_message_codes {
  activity_message_code_id Int                  @default(autoincrement()) @id
  name                     String
  activity_log_items       activity_log_items[]
}

model ballots {
  ballot_id   Int          @default(autoincrement()) @id
  description String?
  election_id Int
  position    String?
  elections   elections    @relation(fields: [election_id], references: [election_id])
  candidates  candidates[]

  @@index([election_id], name: "election_id")
}

model bandaids {
  bandaid_id                               Int       @default(autoincrement()) @id
  description                              String?
  event_id                                 Int
  involved_member_id                       Int
  occurred_at                              DateTime? @default(now())
  reporter_id                              Int
  title                                    String?
  events                                   events    @relation(fields: [event_id], references: [event_id])
  users_bandaids_involved_member_idTousers users     @relation("bandaids_involved_member_idTousers", fields: [involved_member_id], references: [user_id])
  users_bandaids_reporter_idTousers        users     @relation("bandaids_reporter_idTousers", fields: [reporter_id], references: [user_id])

  @@index([event_id], name: "event_id")
  @@index([involved_member_id], name: "involved_member_id")
  @@index([reporter_id], name: "reporter_id")
}

model candidates {
  ballot_id    Int
  candidate_id Int     @default(autoincrement()) @id
  user_id      Int
  ballots      ballots @relation(fields: [ballot_id], references: [ballot_id])
  users        users   @relation(fields: [user_id], references: [user_id])

  @@index([ballot_id], name: "ballot_id")
  @@index([user_id], name: "user_id")
}

model cloudinary_images {
  cloudinary_image_id Int        @default(autoincrement()) @id
  created_at          DateTime?  @default(now())
  public_id           String?
  small_url           String?
  url                 String?
  events              events[]
  trails              trails[]
  users               users[]
  vehicles            vehicles[]
}

model elections {
  election_id Int       @default(autoincrement()) @id
  end_time    DateTime? @default(now())
  name        String?
  start_time  DateTime? @default(now())
  ballots     ballots[]
}

model event_types {
  event_type_id Int      @default(autoincrement()) @id
  name          String
  events        events[]
}

model events {
  address                        String?
  created_at                     DateTime?           @default(now())
  creator_id                     Int
  description                    String?
  end_time                       DateTime?
  event_id                       Int                 @default(autoincrement()) @id
  featured_image_id              Int?
  host_id                        Int?
  members_only                   Boolean?
  rally_address                  String?
  rally_time                     DateTime?
  start_time                     DateTime?
  title                          Int
  trail_difficulty_id            Int?
  trail_id                       Int?
  trail_notes                    String?
  type_id                        Int
  updated_at                     DateTime?           @default(now())
  users_events_creator_idTousers users               @relation("events_creator_idTousers", fields: [creator_id], references: [user_id])
  cloudinary_images              cloudinary_images?  @relation(fields: [featured_image_id], references: [cloudinary_image_id])
  users_events_host_idTousers    users?              @relation("events_host_idTousers", fields: [host_id], references: [user_id])
  trail_difficulties             trail_difficulties? @relation(fields: [trail_difficulty_id], references: [trail_difficulty_id])
  trails                         trails?             @relation(fields: [trail_id], references: [trail_id])
  event_types                    event_types         @relation(fields: [type_id], references: [event_type_id])
  bandaids                       bandaids[]
  run_reports                    run_reports[]

  @@index([creator_id], name: "creator_id")
  @@index([featured_image_id], name: "featured_image_id")
  @@index([host_id], name: "host_id")
  @@index([trail_difficulty_id], name: "trail_difficulty_id")
  @@index([trail_id], name: "trail_id")
  @@index([type_id], name: "type_id")
}

model genders {
  gender_id Int     @default(autoincrement()) @id
  name      String
  users     users[]
}

model membership_log_items {
  logged_at                                   DateTime?                @default(now())
  logger_id                                   Int
  membership_log_item_id                      Int                      @default(autoincrement()) @id
  message                                     String
  message_code_id                             Int
  user_id                                     Int
  users_membership_log_items_logger_idTousers users                    @relation("membership_log_items_logger_idTousers", fields: [logger_id], references: [user_id])
  membership_message_codes                    membership_message_codes @relation(fields: [message_code_id], references: [membership_message_code_id])
  users_membership_log_items_user_idTousers   users                    @relation("membership_log_items_user_idTousers", fields: [user_id], references: [user_id])

  @@index([logger_id], name: "logger_id")
  @@index([message_code_id], name: "message_code_id")
  @@index([user_id], name: "user_id")
}

model membership_message_codes {
  membership_message_code_id Int                    @default(autoincrement()) @id
  name                       String
  membership_log_items       membership_log_items[]
}

model migration_statuses {
  migration_status_id Int    @default(autoincrement()) @id
  name                String
}

model offices {
  name      String
  office_id Int     @default(autoincrement()) @id
  users     users[]
}

model outfit_levels {
  name            String
  outfit_level_id Int        @default(autoincrement()) @id
  vehicles        vehicles[]
}

model poll_types {
  name         String
  poll_type_id Int    @default(autoincrement()) @id
}

model registrations {
  email           String    @unique
  first_name      String
  last_name       String?
  registered_at   DateTime? @default(now())
  registration_id Int       @default(autoincrement()) @id
  source          String?
  token           String    @unique
  token_expiry    DateTime?
}

model roles {
  name    String
  role_id Int     @default(autoincrement()) @id
  users   users[]
}

model rsvp_statuses {
  name           String
  rsvp_status_id Int     @default(autoincrement()) @id
  rsvps          rsvps[]
}

model rsvps {
  created_at    DateTime?     @default(now())
  rsvp_id       Int           @default(autoincrement()) @id
  status_id     Int
  updated_at    DateTime?     @default(now())
  user_id       Int
  rsvp_statuses rsvp_statuses @relation(fields: [status_id], references: [rsvp_status_id])
  users         users         @relation(fields: [user_id], references: [user_id])

  @@index([status_id], name: "status_id")
  @@index([user_id], name: "user_id")
}

model run_reports {
  conditions_id      Int?
  created_at         DateTime?           @default(now())
  description        String?
  difficulty_id      Int?
  end_time           DateTime?
  event_id           Int
  favorite           Boolean?
  rating             Int?
  reporter_id        Int
  run_report_id      Int                 @default(autoincrement()) @id
  start_time         DateTime?
  title              String?
  updated_at         DateTime?           @default(now())
  weather            String?
  trail_conditions   trail_conditions?   @relation(fields: [conditions_id], references: [trail_condition_id])
  trail_difficulties trail_difficulties? @relation(fields: [difficulty_id], references: [trail_difficulty_id])
  events             events              @relation(fields: [event_id], references: [event_id])
  users              users               @relation(fields: [reporter_id], references: [user_id])

  @@index([conditions_id], name: "conditions_id")
  @@index([difficulty_id], name: "difficulty_id")
  @@index([event_id], name: "event_id")
  @@index([reporter_id], name: "reporter_id")
}

model titles {
  name        String
  title_id    Int           @default(autoincrement()) @id
  user_titles user_titles[]
}

model trail_conditions {
  name               String
  trail_condition_id Int           @default(autoincrement()) @id
  run_reports        run_reports[]
}

model trail_difficulties {
  name                String
  trail_difficulty_id Int           @default(autoincrement()) @id
  events              events[]
  run_reports         run_reports[]
  users               users[]
}

model trails {
  address           String?
  description       String?
  editor_id         Int
  featured_image_id Int?
  name              String
  slug              String
  trailhead_coords  String?
  trail_id          Int                @default(autoincrement()) @id
  updated_at        DateTime?          @default(now())
  users             users              @relation(fields: [editor_id], references: [user_id])
  cloudinary_images cloudinary_images? @relation(fields: [featured_image_id], references: [cloudinary_image_id])
  events            events[]

  @@index([editor_id], name: "editor_id")
  @@index([featured_image_id], name: "featured_image_id")
}

model tshirt_sizes {
  name           String
  tshirt_size_id Int     @default(autoincrement()) @id
  users          users[]
}

model user_titles {
  title_id      Int
  user_id       Int
  user_title_id Int    @default(autoincrement()) @id
  titles        titles @relation(fields: [title_id], references: [title_id])
  users         users  @relation(fields: [user_id], references: [user_id])

  @@index([title_id], name: "title_id")
  @@index([user_id], name: "user_id")
}

model users {
  account_setup_complete                                     Boolean?               @default(false)
  account_status_id                                          Int                    @default(8)
  account_type_id                                            Int                    @default(4)
  avatar_id                                                  Int?
  birthdate                                                  DateTime
  city                                                       String?
  comfort_level_id                                           Int?
  created_at                                                 DateTime?              @default(now())
  email                                                      String                 @unique
  emergency_contact_name                                     String?
  emergency_contact_phone                                    String?
  first_login_complete                                       Boolean?               @default(false)
  first_name                                                 String
  gender_id                                                  Int?                   @default(1)
  is_charter_member                                          Boolean?               @default(false)
  joined_at                                                  DateTime?
  last_login_at                                              DateTime?
  last_name                                                  String?
  office_id                                                  Int?
  old_site_migration_complete                                Boolean?
  password                                                   String
  phone                                                      String
  reset_token                                                String?
  reset_token_expiry                                         DateTime?
  role_id                                                    Int                    @default(5)
  show_name_in_photos                                        Boolean?               @default(true)
  show_phone_number                                          Boolean?               @default(true)
  state                                                      String?
  street                                                     String?
  tshirt_size_id                                             Int?
  updated_at                                                 DateTime?              @default(now())
  username                                                   String                 @unique
  user_id                                                    Int                    @default(autoincrement()) @id
  vehicle_id                                                 Int?
  zip                                                        String?
  account_statuses                                           account_statuses       @relation(fields: [account_status_id], references: [account_status_id])
  account_types                                              account_types          @relation(fields: [account_type_id], references: [account_type_id])
  cloudinary_images                                          cloudinary_images?     @relation(fields: [avatar_id], references: [cloudinary_image_id])
  trail_difficulties                                         trail_difficulties?    @relation(fields: [comfort_level_id], references: [trail_difficulty_id])
  genders                                                    genders?               @relation(fields: [gender_id], references: [gender_id])
  offices                                                    offices?               @relation(fields: [office_id], references: [office_id])
  roles                                                      roles                  @relation(fields: [role_id], references: [role_id])
  tshirt_sizes                                               tshirt_sizes?          @relation(fields: [tshirt_size_id], references: [tshirt_size_id])
  vehicles                                                   vehicles?              @relation(fields: [vehicle_id], references: [vehicle_id])
  activity_log_items                                         activity_log_items[]
  bandaids_bandaids_involved_member_idTousers                bandaids[]             @relation("bandaids_involved_member_idTousers")
  bandaids_bandaids_reporter_idTousers                       bandaids[]             @relation("bandaids_reporter_idTousers")
  candidates                                                 candidates[]
  events_events_creator_idTousers                            events[]               @relation("events_creator_idTousers")
  events_events_host_idTousers                               events[]               @relation("events_host_idTousers")
  membership_log_items_membership_log_items_logger_idTousers membership_log_items[] @relation("membership_log_items_logger_idTousers")
  membership_log_items_membership_log_items_user_idTousers   membership_log_items[] @relation("membership_log_items_user_idTousers")
  rsvps                                                      rsvps[]
  run_reports                                                run_reports[]
  trails                                                     trails[]
  user_titles                                                user_titles[]
  votes_usersTovotes_candidate_id                            votes[]                @relation("usersTovotes_candidate_id")
  votes_usersTovotes_voter_id                                votes[]                @relation("usersTovotes_voter_id")

  @@index([account_status_id], name: "account_status_id")
  @@index([account_type_id], name: "account_type_id")
  @@index([avatar_id], name: "avatar_id")
  @@index([comfort_level_id], name: "comfort_level_id")
  @@index([gender_id], name: "gender_id")
  @@index([office_id], name: "office_id")
  @@index([role_id], name: "role_id")
  @@index([tshirt_size_id], name: "tshirt_size_id")
  @@index([vehicle_id], name: "vehicle_id")
}

model vehicles {
  image_id          Int?
  make              String?
  model             String?
  mods              String?
  outfit_level_id   Int?
  trim              String?
  vehicle_id        Int                @default(autoincrement()) @id
  year              Int?
  cloudinary_images cloudinary_images? @relation(fields: [image_id], references: [cloudinary_image_id])
  outfit_levels     outfit_levels?     @relation(fields: [outfit_level_id], references: [outfit_level_id])
  users             users[]

  @@index([image_id], name: "image_id")
  @@index([outfit_level_id], name: "outfit_level_id")
}

model votes {
  candidate_id                    Int
  cast_at                         DateTime? @default(now())
  voter_id                        Int
  vote_id                         Int       @default(autoincrement()) @id
  users_usersTovotes_candidate_id users     @relation("usersTovotes_candidate_id", fields: [candidate_id], references: [user_id])
  users_usersTovotes_voter_id     users     @relation("usersTovotes_voter_id", fields: [voter_id], references: [user_id])

  @@index([candidate_id], name: "candidate_id")
  @@index([voter_id], name: "voter_id")
}